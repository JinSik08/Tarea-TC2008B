/*
Alumno: JinSik Yoon
Matricula: A01026630
Fecha: 14 de noviembre de 2025
Descripción: Tarea CG 1 de Computación Gráfica
*/

'use strict';

// Importamos las librerías necesarias para las operaciones de WebGL
import GUI from 'lil-gui';
import { M3 } from './2d-lib.js';

// Definimos los códigos de shader usando GLSL 3.00
// Vertex Shader
const vsGLSL = `#version 300 es
in vec2 a_position;
in vec4 a_color;

uniform mat3 u_transforms;

out vec4 v_color;

void main() {
    vec3 transformedPos = u_transforms * vec3(a_position, 1.0);
    gl_Position = vec4(transformedPos.xy, 0.0, 1.0);
    v_color = a_color;
}
`;
// Fragment Shader
const fsGLSL = `#version 300 es
precision highp float;

in vec4 v_color;

out vec4 outColor;

void main() {
    outColor = v_color;
}
`;

// Obtenemos el canva y los contextos de WebGL
const canvas = document.querySelector('canvas');
const gl = canvas.getContext('webgl2');

// Ajustamos el tamaño de canvas y el viewport cada vez que se resetea la ventana
const header = document.getElementById('headerContainer');
const headerH = header ? header.offsetHeight : 0;
canvas.width = window.innerWidth;
canvas.height = window.innerHeight - headerH;
gl.viewport(0, 0, canvas.width, canvas.height);
gl.clearColor(0.95, 0.95, 0.95, 1);

// Ajuste inicial del viewport
gl.viewport(0, 0, canvas.width, canvas.height)

// Prepara el programa de Vertex Shader
const vertexShader = gl.createShader(gl.VERTEX_SHADER);
gl.shaderSource(vertexShader, vsGLSL);
gl.compileShader(vertexShader);
if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {
  throw new Error(gl.getShaderInfoLog(vertexShader))
};

// Prepara el programa de Fragment Shader
const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
gl.shaderSource(fragmentShader, fsGLSL);
gl.compileShader(fragmentShader);
if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {
  throw new Error(gl.getShaderInfoLog(fragmentShader))
};

// Compila el programa de shaders
const prg = gl.createProgram();
gl.attachShader(prg, vertexShader);
gl.attachShader(prg, fragmentShader);
gl.linkProgram(prg);
if (!gl.getProgramParameter(prg, gl.LINK_STATUS)) {
  throw new Error(gl.getProgramInfoLog(prg))
};

// Limpia los shaders ya que no se necesitan más
gl.detachShader(prg, vertexShader);
gl.deleteShader(vertexShader);
gl.detachShader(prg, fragmentShader);
gl.deleteShader(fragmentShader);

// Obtenemos los posiciones de los atributos y uniformes
const positionLoc = gl.getAttribLocation(prg, 'a_position');
const colorLoc = gl.getAttribLocation(prg, 'a_color');
const transformsLoc = gl.getUniformLocation(prg, 'u_transforms');

// Definimos las coordenadas y colores de los vértices de los objetos a dibujar
// OBJETO 1: El pivote (Yoshi)
const pivotData = {
  a_position: {
    numComponents: 2,
      data: new Float32Array([

        // Cuadros negros

        0, 0.7, 0, 0.65, 0.05, 0.65,
        0, 0.7, 0.05, 0.7, 0.05, 0.65,

        0.05, 0.75, 0.05, 0.7, 0.15, 0.7,
        0.05, 0.75, 0.15, 0.75, 0.15, 0.7,

        0.15, 0.7, 0.15, 0.65, 0.2, 0.65,
        0.15, 0.7, 0.2, 0.7, 0.2, 0.65,

        0.2, 0.65, 0.2, 0.5, 0.25, 0.5,
        0.2, 0.65, 0.25, 0.65, 0.25, 0.5,

        0.2, 0.5, 0.2, 0.45, 0.35, 0.45,
        0.2, 0.5, 0.35, 0.5, 0.35, 0.45,

        0.35, 0.45, 0.35, 0.4, 0.4, 0.4,
        0.35, 0.45, 0.4, 0.45, 0.4, 0.4,

        0.4, 0.4, 0.4, 0.35, 0.45, 0.35,
        0.4, 0.4, 0.45, 0.4, 0.45, 0.35,

        0.45, 0.35, 0.45, 0.1, 0.5, 0.1,
        0.45, 0.35, 0.5, 0.35, 0.5, 0.1,

        0.4, 0.1, 0.4, 0.05, 0.45, 0.05,
        0.4, 0.1, 0.45, 0.1, 0.45, 0.05,

        0.3, 0.05, 0.3, 0.0, 0.4, 0.0,
        0.3, 0.05, 0.4, 0.05, 0.4, 0.0,

        0.15, 0.0, 0.15, -0.05, 0.3, -0.05,
        0.15, 0.0, 0.3, 0.0, 0.3, -0.05,

        0.0, 0.0, 0.0, -0.1, 0.15, -0.1,
        0.0, 0.0, 0.15, 0.0, 0.15, -0.1,

        0.05, 0.05, 0.05, 0.0, 0.1, 0.0,
        0.05, 0.05, 0.1, 0.05, 0.1, 0.0,

        0.0, 0.2, 0.0, 0.05, 0.05, 0.05,
        0.0, 0.2, 0.05, 0.2, 0.05, 0.05,

        -0.05, 0.15, -0.05, 0.1, 0.0, 0.1,
        -0.05, 0.15, 0.0, 0.15, 0.0, 0.1,

        0.15, 0.45, 0.15, 0.4, 0.2, 0.4,
        0.15, 0.45, 0.2, 0.45, 0.2, 0.4,

        0.1, 0.6, 0.1, 0.5, 0.15, 0.5,
        0.1, 0.6, 0.15, 0.6, 0.15, 0.5,

        0.0, 0.6, 0.0, 0.5, 0.05, 0.5,
        0.0, 0.6, 0.05, 0.6, 0.05, 0.5,

        0.25, 0.35, 0.25, 0.3, 0.3, 0.3,
        0.25, 0.35, 0.3, 0.35, 0.3, 0.3,

        0.35, 0.35, 0.35, 0.3, 0.4, 0.3,
        0.35, 0.35, 0.4, 0.35, 0.4, 0.3,

        0.0, -0.1, 0.0, -0.4, 0.05, -0.4,
        0.0, -0.1, 0.05, -0.1, 0.05, -0.4,

        0.05, -0.15, 0.05, -0.3, 0.1, -0.3,
        0.05, -0.15, 0.1, -0.15, 0.1, -0.3,
        
        0.1, -0.2, 0.1, -0.25, 0.15, -0.25,
        0.1, -0.2, 0.15, -0.2, 0.15, -0.25,

        -0.05, -0.4, -0.05, -0.45, 0.2, -0.45,
        -0.05, -0.4, 0.2, -0.4, 0.2, -0.45,

        0.2, -0.15, 0.2, -0.4, 0.25, -0.4,
        0.2, -0.15, 0.25, -0.15, 0.25, -0.4,

        0.15, -0.1, 0.15, -0.15, 0.2, -0.15,
        0.15, -0.1, 0.2, -0.1, 0.2, -0.15,

        -0.1, -0.45, -0.1, -0.5, -0.05, -0.5,
        -0.1, -0.45, -0.05, -0.45, -0.05, -0.5,

        -0.15, -0.5, -0.15, -0.6, -0.05, -0.6,
        -0.15, -0.5, -0.05, -0.5, -0.05, -0.6,

        -0.2, -0.5, -0.2, -0.55, -0.15, -0.55,
        -0.2, -0.5, -0.15, -0.5, -0.15, -0.55,

        -0.05, -0.55, -0.05, -0.75, 0.0, -0.75,
        -0.05, -0.55, 0.0, -0.55, 0.0, -0.75,

        -0.65, -0.7, -0.65, -0.75, -0.05, -0.75,
        -0.65, -0.7, -0.05, -0.7, -0.05, -0.75,

        -0.25, -0.55, -0.25, -0.6, -0.2, -0.6,
        -0.25, -0.55, -0.2, -0.55, -0.2, -0.6,

        -0.3, -0.55, -0.3, -0.7, -0.25, -0.7,
        -0.3, -0.55, -0.25, -0.55, -0.25, -0.7,

        -0.35, -0.5, -0.35, -0.6, -0.3, -0.6,
        -0.35, -0.5, -0.3, -0.5, -0.3, -0.6,

        -0.6, -0.45, -0.6, -0.5, -0.25, -0.5,
        -0.6, -0.45, -0.25, -0.45, -0.25, -0.5,

        -0.6, -0.5, -0.6, -0.6, -0.55, -0.6,
        -0.6, -0.5, -0.55, -0.5, -0.55, -0.6,

        -0.65, -0.55, -0.65, -0.7, -0.6, -0.7,
        -0.65, -0.55, -0.6, -0.55, -0.6, -0.7,

        -0.25, -0.4, -0.25, -0.45, -0.2, -0.45,
        -0.25, -0.4, -0.2, -0.4, -0.2, -0.45,

        -0.2, -0.25, -0.2, -0.4, -0.15, -0.4,
        -0.2, -0.25, -0.15, -0.25, -0.15, -0.4,

        -0.25, -0.3, -0.25, -0.35, -0.2, -0.35,
        -0.25, -0.3, -0.2, -0.3, -0.2, -0.35,

        -0.25, -0.2, -0.25, -0.25, -0.2, -0.25,
        -0.25, -0.2, -0.2, -0.2, -0.2, -0.25,

        -0.2, -0.15, -0.2, -0.2, -0.15, -0.2,
        -0.2, -0.15, -0.15, -0.15, -0.15, -0.2,

        -0.65, -0.35, -0.65, -0.45, -0.6, -0.45,
        -0.65, -0.35, -0.6, -0.35, -0.6, -0.45,

        -0.7, -0.2, -0.7, -0.35, -0.65, -0.35,
        -0.7, -0.2, -0.65, -0.2, -0.65, -0.35,

        -0.7, -0.15, -0.7, -0.2, -0.55, -0.2,
        -0.7, -0.15, -0.55, -0.15, -0.55, -0.2,

        -0.6, -0.05, -0.6, -0.15, -0.55, -0.15,
        -0.6, -0.05, -0.55, -0.05, -0.55, -0.15,

        -0.55, 0.0, -0.55, -0.05, -0.5, -0.05,
        -0.55, 0.0, -0.5, 0.0, -0.5, -0.05,

        -0.5, 0.05, -0.5, 0.0, -0.4, 0.0,
        -0.5, 0.05, -0.4, 0.05, -0.4, 0.0,

        -0.4, 0.05, -0.4, -0.05, -0.3, -0.05,
        -0.4, 0.05, -0.3, 0.05, -0.3, -0.05,

        -0.3, 0.0, -0.3, -0.05, -0.2, -0.05,
        -0.3, 0.0, -0.2, 0.0, -0.2, -0.05,

        -0.35, -0.05, -0.35, -0.1, -0.25, -0.1,
        -0.35, -0.05, -0.25, -0.05, -0.25, -0.1,

        -0.4, -0.1, -0.4, -0.15, -0.3, -0.15,
        -0.4, -0.1, -0.3, -0.1, -0.3, -0.15,

        -0.45, -0.15, -0.45, -0.2, -0.4, -0.2,
        -0.45, -0.15, -0.4, -0.15, -0.4, -0.2,

        -0.55, -0.2, -0.55, -0.25, -0.45, -0.25,
        -0.55, -0.2, -0.45, -0.2, -0.45, -0.25,

        -0.55, -0.25, -0.55, -0.4, -0.5, -0.4,
        -0.55, -0.25, -0.5, -0.25, -0.5, -0.4,

        -0.5, -0.4, -0.5, -0.45, -0.45, -0.45,
        -0.5, -0.4, -0.45, -0.4, -0.45, -0.45,

        -0.25, 0.05, -0.25, 0.0, -0.2, 0.0,
        -0.25, 0.05, -0.2, 0.05, -0.2, 0.0,

        -0.35, 0.1, -0.35, 0.05, -0.2, 0.05,
        -0.35, 0.1, -0.2, 0.1, -0.2, 0.05,

        -0.3, 0.15, -0.3, 0.1, -0.25, 0.1,
        -0.3, 0.15, -0.25, 0.15, -0.25, 0.1,

        -0.4, 0.25, -0.4, 0.1, -0.35, 0.1,
        -0.4, 0.25, -0.35, 0.25, -0.35, 0.1,

        -0.35, 0.4, -0.35, 0.15, -0.3, 0.15,
        -0.35, 0.4, -0.3, 0.4, -0.3, 0.15,

        -0.4, 0.45, -0.4, 0.4, -0.25, 0.4,
        -0.4, 0.45, -0.25, 0.45, -0.25, 0.4,

        -0.45, 0.4, -0.45, 0.35, -0.4, 0.35,
        -0.45, 0.4, -0.4, 0.4, -0.4, 0.35,

        -0.5, 0.35, -0.5, 0.25, -0.45, 0.25,
        -0.5, 0.35, -0.45, 0.35, -0.45, 0.25,

        -0.45, 0.25, -0.45, 0.2, -0.4, 0.2,
        -0.45, 0.25, -0.4, 0.25, -0.4, 0.2,

        -0.4, 0.55, -0.4, 0.45, -0.35, 0.45,
        -0.4, 0.55, -0.35, 0.55, -0.35, 0.45,

        -0.35, 0.6, -0.35, 0.55, -0.2, 0.55,
        -0.35, 0.6, -0.2, 0.6, -0.2, 0.55,

        -0.25, 0.5, -0.25, 0.45, -0.15, 0.45,
        -0.25, 0.5, -0.15, 0.5, -0.15, 0.45,

        -0.2, 0.65, -0.2, 0.5, -0.15, 0.5,
        -0.2, 0.65, -0.15, 0.65, -0.15, 0.5,

        -0.15, 0.7, -0.15, 0.65, -0.1, 0.65,
        -0.15, 0.7, -0.1, 0.7, -0.1, 0.65,

        -0.1, 0.75, -0.1, 0.7, 0.0, 0.7,
        -0.1, 0.75, 0.0, 0.75, 0.0, 0.7,

        // Cuadros verdes

        -0.05, 0.7, -0.05, 0.65, 0.0, 0.65,
        -0.05, 0.7, 0.0, 0.7, 0.0, 0.65,

        -0.1, 0.7, -0.1, 0.6, -0.05, 0.6,
        -0.1, 0.7, -0.05, 0.7, -0.05, 0.6,

        -0.15, 0.65, -0.15, 0.55, -0.1, 0.55,
        -0.15, 0.65, -0.1, 0.65, -0.1, 0.55,

        0.05, 0.7, 0.05, 0.65, 0.15, 0.65,
        0.05, 0.7, 0.15, 0.7, 0.15, 0.65,

        0.15, 0.65, 0.15, 0.6, 0.2, 0.6,
        0.15, 0.65, 0.2, 0.65, 0.2, 0.6,

        0.0, 0.4, 0.0, 0.3, 0.25, 0.3,
        0.0, 0.4, 0.25, 0.4, 0.25, 0.3,

        0.2, 0.45, 0.2, 0.4, 0.35, 0.4,
        0.2, 0.45, 0.35, 0.45, 0.35, 0.4,

        0.25, 0.4, 0.25, 0.35, 0.4, 0.35,
        0.25, 0.4, 0.4, 0.4, 0.4, 0.35,

        0.0, 0.3, 0.0, 0.2, 0.45, 0.2,
        0.0, 0.3, 0.45, 0.3, 0.45, 0.2,

        0.05, 0.2, 0.05, 0.1, 0.45, 0.1,
        0.05, 0.2, 0.45, 0.2, 0.45, 0.1,

        0.05, 0.1, 0.05, 0.05, 0.4, 0.05,
        0.05, 0.1, 0.4, 0.1, 0.4, 0.05,

        0.1, 0.05, 0.1, 0.0, 0.3, 0.0,
        0.1, 0.05, 0.3, 0.05, 0.3, 0.0,

        0.3, 0.35, 0.3, 0.3, 0.35, 0.3,
        0.3, 0.35, 0.35, 0.35, 0.35, 0.3,

        0.4, 0.35, 0.4, 0.3, 0.45, 0.3,
        0.4, 0.35, 0.45, 0.35, 0.45, 0.3,

        -0.2, 0.4, -0.2, 0.35, 0.0, 0.35,
        -0.2, 0.4, 0.0, 0.4, 0.0, 0.35,

        -0.2, 0.45, -0.2, 0.4, -0.1, 0.4,
        -0.2, 0.45, -0.1, 0.45, -0.1, 0.4,

        -0.2, 0.35, -0.2, 0.3, -0.15, 0.3,
        -0.2, 0.35, -0.15, 0.35, -0.15, 0.3,

        -0.25, 0.45, -0.25, 0.1, -0.2, 0.1,
        -0.25, 0.45, -0.2, 0.45, -0.2, 0.1,

        -0.3, 0.4, -0.3, 0.15, -0.25, 0.15,
        -0.3, 0.4, -0.25, 0.4, -0.25, 0.15,

        -0.2, 0.15, -0.2, -0.15, -0.15, -0.15,
        -0.2, 0.15, -0.15, 0.15, -0.15, -0.15,

        -0.15, 0.05, -0.15, -0.1, -0.1, -0.1,
        -0.15, 0.05, -0.1, 0.05, -0.1, -0.1,

        -0.25, -0.05, -0.25, -0.2, -0.2, -0.2,
        -0.25, -0.05, -0.2, -0.05, -0.2, -0.2,

        -0.3, -0.1, -0.3, -0.15, -0.25, -0.15,
        -0.3, -0.1, -0.25, -0.1, -0.25, -0.15,

        -0.4, -0.15, -0.4, -0.45, -0.25, -0.45,
        -0.4, -0.15, -0.25, -0.15, -0.25, -0.45,

        -0.45, -0.2, -0.45, -0.45, -0.4, -0.45,
        -0.45, -0.2, -0.4, -0.2, -0.4, -0.45,

        -0.5, -0.25, -0.5, -0.4, -0.45, -0.4,
        -0.5, -0.25, -0.45, -0.25, -0.45, -0.4,

        -0.25, -0.25, -0.25, -0.3, -0.2, -0.3,
        -0.25, -0.25, -0.2, -0.25, -0.2, -0.3,

        -0.25, -0.35, -0.25, -0.4, -0.2, -0.4,
        -0.25, -0.35, -0.2, -0.35, -0.2, -0.4,

        0.05, -0.3, 0.05, -0.4, 0.1, -0.4,
        0.05, -0.3, 0.1, -0.3, 0.1, -0.4,

        0.1, -0.25, 0.1, -0.4, 0.15, -0.4,
        0.1, -0.25, 0.15, -0.25, 0.15, -0.4,

        0.15, -0.15, 0.15, -0.4, 0.2, -0.4,
        0.15, -0.15, 0.2, -0.15, 0.2, -0.4,

        0.1, -0.1, 0.1, -0.15, 0.15, -0.15,
        0.1, -0.1, 0.15, -0.1, 0.15, -0.15,

        -0.6, -0.2, -0.6, -0.3, -0.55, -0.3,
        -0.6, -0.2, -0.55, -0.2, -0.55, -0.3,

        -0.65, -0.2, -0.65, -0.25, -0.6, -0.25,
        -0.65, -0.2, -0.6, -0.2, -0.6, -0.25,

        // Cuadros naranjas

        -0.55, -0.5, -0.55, -0.6, -0.35, -0.6,
        -0.55, -0.5, -0.35, -0.5, -0.35, -0.6,

        -0.6, -0.6, -0.6, -0.65, -0.4, -0.65,
        -0.6, -0.6, -0.4, -0.6, -0.4, -0.65,

        -0.35, -0.6, -0.35, -0.65, -0.3, -0.65,
        -0.35, -0.6, -0.3, -0.6, -0.3, -0.65,

        -0.25, -0.6, -0.25, -0.65, -0.1, -0.65,
        -0.25, -0.6, -0.1, -0.6, -0.1, -0.65,

        -0.2, -0.55, -0.2, -0.6, -0.15, -0.6,
        -0.2, -0.55, -0.15, -0.55, -0.15, -0.6,

        // Cuadros amarillos

        -0.25, -0.65, -0.25, -0.7, -0.05, -0.7,
        -0.25, -0.65, -0.05, -0.65, -0.05, -0.7,

        -0.6, -0.65, -0.6, -0.7, -0.3, -0.7,
        -0.6, -0.65, -0.3, -0.65, -0.3, -0.7,

        // Cuadros rojos

        -0.35, 0.55, -0.35, 0.5, -0.2, 0.5,
        -0.35, 0.55, -0.2, 0.55, -0.2, 0.5,

        -0.35, 0.5, -0.35, 0.45, -0.25, 0.45,
        -0.35, 0.5, -0.25, 0.5, -0.25, 0.45,

        -0.4, 0.4, -0.4, 0.25, -0.35, 0.25,
        -0.4, 0.4, -0.35, 0.4, -0.35, 0.25,

        -0.45, 0.35, -0.45, 0.25, -0.4, 0.25,
        -0.45, 0.35, -0.4, 0.35, -0.4, 0.25,

        -0.35, 0.15, -0.35, 0.1, -0.3, 0.1,
        -0.35, 0.15, -0.3, 0.15, -0.3, 0.1,

        -0.3, 0.05, -0.3, 0.0, -0.25, 0.0,
        -0.3, 0.05, -0.25, 0.05, -0.25, 0.0,

        -0.5, 0.0, -0.5, -0.05, -0.4, -0.05,
        -0.5, 0.0, -0.4, 0.0, -0.4, -0.05,

        -0.55, -0.05, -0.55, -0.1, -0.4,-0.1,
        -0.55, -0.05, -0.4, -0.05, -0.4, -0.1,

        -0.55, -0.1, -0.55, -0.15, -0.45, -0.15,
        -0.55, -0.1, -0.45, -0.1, -0.45, -0.15,
      ]),
    },
    a_color: {
        numComponents: 4,
        data: new Uint8Array([

            // Color negro
            
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
    
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            // Color verde

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            // Color naranja

            255, 153, 0, 255, 255, 153, 0, 255, 255, 153, 0, 255,
            255, 153, 0, 255, 255, 153, 0, 255, 255, 153, 0, 255,

            255, 153, 0, 255, 255, 153, 0, 255, 255, 153, 0, 255,
            255, 153, 0, 255, 255, 153, 0, 255, 255, 153, 0, 255,

            255, 153, 0, 255, 255, 153, 0, 255, 255, 153, 0, 255,
            255, 153, 0, 255, 255, 153, 0, 255, 255, 153, 0, 255,

            255, 153, 0, 255, 255, 153, 0, 255, 255, 153, 0, 255,
            255, 153, 0, 255, 255, 153, 0, 255, 255, 153, 0, 255,

            255, 153, 0, 255, 255, 153, 0, 255, 255, 153, 0, 255,
            255, 153, 0, 255, 255, 153, 0, 255, 255, 153, 0, 255,

            // Color amarillo

            255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255,
            255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255,

            255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255,
            255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255,

            // Color rojo

            255, 51, 0, 255, 255, 51, 0, 255, 255, 51, 0, 255,
            255, 51, 0, 255, 255, 51, 0, 255, 255, 51, 0, 255,

            255, 51, 0, 255, 255, 51, 0, 255, 255, 51, 0, 255,
            255, 51, 0, 255, 255, 51, 0, 255, 255, 51, 0, 255,

            255, 51, 0, 255, 255, 51, 0, 255, 255, 51, 0, 255,
            255, 51, 0, 255, 255, 51, 0, 255, 255, 51, 0, 255,

            255, 51, 0, 255, 255, 51, 0, 255, 255, 51, 0, 255,
            255, 51, 0, 255, 255, 51, 0, 255, 255, 51, 0, 255,

            255, 51, 0, 255, 255, 51, 0, 255, 255, 51, 0, 255,
            255, 51, 0, 255, 255, 51, 0, 255, 255, 51, 0, 255,

            255, 51, 0, 255, 255, 51, 0, 255, 255, 51, 0, 255,
            255, 51, 0, 255, 255, 51, 0, 255, 255, 51, 0, 255,

            255, 51, 0, 255, 255, 51, 0, 255, 255, 51, 0, 255,
            255, 51, 0, 255, 255, 51, 0, 255, 255, 51, 0, 255,

            255, 51, 0, 255, 255, 51, 0, 255, 255, 51, 0, 255,
            255, 51, 0, 255, 255, 51, 0, 255, 255, 51, 0, 255,

            255, 51, 0, 255, 255, 51, 0, 255, 255, 51, 0, 255,
            255, 51, 0, 255, 255, 51, 0, 255, 255, 51, 0, 255,
        ])
    }
};

//// OBJETO 2: Face (huevo)
const faceData = {
    a_position: {
        numComponents: 2,
        data: new Float32Array([
            
            // Cuadros negros

            -0.025, 0.1, -0.025, 0.0875, 0.025, 0.0875,
            -0.025, 0.1, 0.025, 0.1, 0.025, 0.0875,

            0.025, 0.0875, 0.025, 0.075, 0.0375, 0.075,
            0.025, 0.0875, 0.0375, 0.0875, 0.0375, 0.075,

            0.0375, 0.075, 0.0375, 0.0625, 0.05, 0.0625,
            0.0375, 0.075, 0.05, 0.075, 0.05, 0.0625,

            0.05, 0.0625, 0.05, 0.0375, 0.0625, 0.0375,
            0.05, 0.0625, 0.0625, 0.0625, 0.0625, 0.0375,

            0.0625, 0.0375, 0.0625, 0.0125, 0.075, 0.0125,
            0.0625, 0.0375, 0.075, 0.0375, 0.075, 0.0125,

            0.075, 0.0125, 0.075, -0.0375, 0.0875, -0.0375,
            0.075, 0.0125, 0.0875, 0.0125, 0.0875, -0.0375,

            0.0625, -0.0375, 0.0625, -0.0625, 0.075, -0.0625,
            0.0625, -0.0375, 0.075, -0.0375, 0.075, -0.0625,

            0.05, -0.0625, 0.05, -0.075, 0.0625, -0.075,
            0.05, -0.0625, 0.0625, -0.0625, 0.0625, -0.075,

            0.025, -0.075, 0.025, -0.0875, 0.05, -0.0875,
            0.025, -0.075, 0.05, -0.075, 0.05, -0.0875,

            -0.025, -0.0875, -0.025, -0.1, 0.025, -0.1,
            -0.025, -0.0875, 0.025, -0.0875, 0.025, -0.1,

            -0.05, -0.075, -0.05, -0.0875, -0.025, -0.0875,
            -0.05, -0.075, -0.025, -0.075, -0.025, -0.0875,

            -0.0625, -0.0625, -0.0625, -0.075, -0.05, -0.075,
            -0.0625, -0.0625, -0.05, -0.0625, -0.05, -0.075,

            -0.075, -0.0375, -0.075, -0.0625, -0.0625, -0.0625,
            -0.075, -0.0375, -0.0625, -0.0375, -0.0625, -0.0625,

            -0.0875, 0.0125, -0.0875, -0.0375, -0.075, -0.0375,
            -0.0875, 0.0125, -0.075, 0.0125, -0.075, -0.0375,

            -0.075, 0.0375, -0.075, 0.0125, -0.0625, 0.0125,
            -0.075, 0.0375, -0.0625, 0.0375, -0.0625, 0.0125,

            -0.0625, 0.0625, -0.0625, 0.0375, -0.05, 0.0375,
            -0.0625, 0.0625, -0.05, 0.0625, -0.05, 0.0375,

            -0.05, 0.075, -0.05, 0.0625, -0.0375, 0.0625,
            -0.05, 0.075, -0.0375, 0.075, -0.0375, 0.0625,

            -0.0375, 0.0875, -0.0375, 0.075, -0.025, 0.075,
            -0.0375, 0.0875, -0.025, 0.0875, -0.025, 0.075,

            // Cuadros verdes

            -0.0125, 0.0125, -0.0125, 0.0, 0.025, 0.0,
            -0.0125, 0.0125, 0.025, 0.0125, 0.025, 0.0,

            -0.025, 0.0, -0.025, -0.0375, 0.0375, -0.0375,
            -0.025, 0.0, 0.0375, 0.0, 0.0375, -0.0375,

            -0.0125, -0.0375, -0.0125, -0.05, 0.025, -0.05,
            -0.0125, -0.0375, 0.025, -0.0375, 0.025, -0.05,

            0.0375, -0.0375, 0.0375, -0.0625, 0.0625, -0.0625,
            0.0375, -0.0375, 0.0625, -0.0375, 0.0625, -0.0625,

            0.05, -0.025, 0.05, -0.0375, 0.075, -0.0375,
            0.05, -0.025, 0.075, -0.025, 0.075, -0.0375,

            0.0375, -0.0625, 0.0375, -0.075, 0.05, -0.075,
            0.0375, -0.0625, 0.05, -0.0625, 0.05, -0.075,

            0.0125, 0.075, 0.0125, 0.0625, 0.0375, 0.0625,
            0.0125, 0.075, 0.0375, 0.075, 0.0375, 0.0625,

            0.0125, 0.0625, 0.0125, 0.0375, 0.05, 0.0375,
            0.0125, 0.0625, 0.05, 0.0625, 0.05, 0.0375,

            0.025, 0.0375, 0.025, 0.025, 0.05, 0.025,
            0.025, 0.0375, 0.05, 0.0375, 0.05, 0.025,

            -0.05, 0.0625, -0.05, 0.0375, -0.025, 0.0375,
            -0.05, 0.0625, -0.025, 0.0625, -0.025, 0.0375,

            -0.0625, 0.0375, -0.0625, 0.025, -0.025, 0.025,
            -0.0625, 0.0375, -0.025, 0.0375, -0.025, 0.025,

            -0.0625, 0.025, -0.0625, 0.0125, -0.0375, 0.0125,
            -0.0625, 0.025, -0.0375, 0.025, -0.0375, 0.0125,

            -0.075, -0.0125, -0.075, -0.025, -0.05, -0.025,
            -0.075, -0.0125, -0.05, -0.0125, -0.05, -0.025,

            -0.075, -0.025, -0.075, -0.0375, -0.0375, -0.0375,
            -0.075, -0.025, -0.0375, -0.025, -0.0375, -0.0375,

            -0.0625, -0.0375, -0.0625, -0.0625, -0.0375, -0.0625,
            -0.0625, -0.0375, -0.0375, -0.0375, -0.0375, -0.0625,

            // Cuadros blancos

            -0.025, 0.0875, -0.025, 0.075, 0.025, 0.075,
            -0.025, 0.0875, 0.025, 0.0875, 0.025, 0.075,

            -0.0375, 0.075, -0.0375, 0.0625, 0.0125, 0.0625,
            -0.0375, 0.075, 0.0125, 0.075, 0.0125, 0.0625,

            -0.025, 0.0625, -0.025, 0.0375, 0.0125, 0.0375,
            -0.025, 0.0625, 0.0125, 0.0625, 0.0125, 0.0375,

            -0.025, 0.0375, -0.025, 0.0125, 0.025, 0.0125,
            -0.025, 0.0375, 0.025, 0.0375, 0.025, 0.0125,

            -0.0375, 0.025, -0.0375, 0.0125, -0.025, 0.0125,
            -0.0375, 0.025, -0.025, 0.025, -0.025, 0.0125,

            -0.025, 0.0125, -0.025, 0.0, -0.0125, 0.0,
            -0.025, 0.0125, -0.0125, 0.0125, -0.0125, 0.0,

            0.025, 0.025, 0.025, 0.0, 0.0625, 0.0,
            0.025, 0.025, 0.0625, 0.025, 0.0625, 0.0,

            0.0375, 0.0, 0.0375, -0.025, 0.075, -0.025,
            0.0375, 0.0, 0.075, 0.0, 0.075, -0.025,

            0.05, 0.0375, 0.05, 0.025, 0.0625, 0.025,
            0.05, 0.0375, 0.0625, 0.0375, 0.0625, 0.025,

            0.0625, 0.0125, 0.0625, 0.0, 0.075, 0.0,
            0.0625, 0.0125, 0.075, 0.0125, 0.075, 0.0,

            0.0375, -0.025, 0.0375, -0.0375, 0.05, -0.0375,
            0.0375, -0.025, 0.05, -0.025, 0.05, -0.0375,

            0.025, -0.0375, 0.025, -0.05, 0.0375, -0.05,
            0.025, -0.0375, 0.0375, -0.0375, 0.0375, -0.05,

            -0.0375, -0.05, -0.0375, -0.075, 0.0375, -0.075,
            -0.0375, -0.05, 0.0375, -0.05, 0.0375, -0.075,

            -0.025, -0.075, -0.025, -0.0875, 0.025, -0.0875,
            -0.025, -0.075, 0.025, -0.075, 0.025, -0.0875,

            -0.05, -0.0625, -0.05, -0.075, -0.0375, -0.075,
            -0.05, -0.0625, -0.0375, -0.0625, -0.0375, -0.075,

            -0.0375, -0.0375, -0.0375, -0.05, -0.0125, -0.05,
            -0.0375, -0.0375, -0.0125, -0.0375, -0.0125, -0.05,

            -0.0375, -0.025, -0.0375, -0.0375, -0.025, -0.0375,
            -0.0375, -0.025, -0.025, -0.025, -0.025, -0.0375,

            -0.05, -0.0125, -0.05, -0.025, -0.025, -0.025,
            -0.05, -0.0125, -0.025, -0.0125, -0.025, -0.025,

            -0.075, 0.0125, -0.075, -0.0125, -0.025, -0.0125,
            -0.075, 0.0125, -0.025, 0.0125, -0.025, -0.0125,
        ])
    },
    a_color: {
        numComponents: 4,
        data: new Uint8Array([
            
            // Color negro
          
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,
            10, 3, 1, 255, 10, 3, 1, 255, 10, 3, 1, 255,

            // Color verde

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,
            51, 204, 51, 255, 51, 204, 51, 255, 51, 204, 51, 255,

            // Color blanco

            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,

            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,

            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,

            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,

            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,

            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,

            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,

            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,

            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,

            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,

            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,

            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,

            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,

            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,

            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,

            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,

            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,

            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,

            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
        ])
    }
};

// Función para crear los VAOs
function createVAO(data) {
    // Crear y bind del VAO
    const vao = gl.createVertexArray();
    gl.bindVertexArray(vao);

    // Crear y bind del buffer de posiciones
    const posBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER, posBuffer);
    gl.bufferData(gl.ARRAY_BUFFER, data.a_position.data, gl.STATIC_DRAW);
    gl.enableVertexAttribArray(positionLoc);
    gl.vertexAttribPointer(positionLoc, data.a_position.numComponents, gl.FLOAT, false, 0, 0);

    // Crear y bind del buffer de colores
    const colorBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER, colorBuffer);
    gl.bufferData(gl.ARRAY_BUFFER, data.a_color.data, gl.STATIC_DRAW);
    gl.enableVertexAttribArray(colorLoc);
    gl.vertexAttribPointer(colorLoc, data.a_color.numComponents, gl.UNSIGNED_BYTE, true, 0, 0);

    // Unbind del VAO
    gl.bindVertexArray(null);
    return { vao, vertexCount: data.a_position.data.length / data.a_position.numComponents };
}

// Crear los VAOs de cara y pivote
const pivotVAO = createVAO(pivotData);
const faceVAO = createVAO(faceData);

// El estado inicial de la escena
const state = {
    pivot: { x: 0, y: 0, scale: { x: 1, y: 1 } },
    face: { translation: { x: 0.5, y: -0.5 }, rotation: 0, scale: { x: 0.5, y: 0.5 } }
};

// Configuración de la interfaz de usuario
function setupUI() {
    // Crear GUI
    const gui = new GUI();

    // Carpeta para la configuración del pivote
    const pp = gui.addFolder('Pivote (Yoshi)');
    const pf = pp.addFolder('Traslación');
    pf.add(state.pivot, 'x', -1, 1, 0.01).name('Traslación X');
    pf.add(state.pivot, 'y', -1, 1, 0.01).name('Traslación Y');
    const ps = pp.addFolder('Escala');
    ps.add(state.pivot.scale, 'x', 0.1, 3, 0.01).name('Escala X');
    ps.add(state.pivot.scale, 'y', 0.1, 3, 0.01).name('Escala Y');

    // Carpeta para la configuración de la cara
    const ff = gui.addFolder('Cara (Huevo)');
    const t = ff.addFolder('Traslación');
    t.add(state.face.translation, 'x', -1, 1, 0.01).name('Traslación X');
    t.add(state.face.translation, 'y', -1, 1, 0.01).name('Traslación Y');
    const s = ff.addFolder('Escala');
    s.add(state.face.scale, 'x', 0.1, 5, 0.01).name('Escala X');
    s.add(state.face.scale, 'y', 0.1, 5, 0.01).name('Escala Y');
    const r = ff.addFolder('Rotación');
    r.add(state.face, 'rotation', 0, Math.PI * 2, 0.01).name('Rotación');
}
// Inicializar la interfaz de usuario
setupUI();

// Función para dibujar un objeto con sus transformaciones
function drawScene(gl, vaoObj, model) {
    // Calcular las matrices de transformación
    const translationMat = M3.translation(model.translation);
    const rotationMat = M3.rotation(model.rotation);
    const scaleMat = M3.scale(model.scale);

    let M = M3.identity();

    // Aplicar las transformaciones dependiendo del objeto
    if (pivotVAO === vaoObj) {
        // Aplicar las transformaciones
        M = M3.multiply(M, translationMat);
        M = M3.multiply(M, rotationMat);
        M = M3.multiply(M, scaleMat);
    } else if (faceVAO === vaoObj) {
        // Mover el origen de coordenadas al pivote
        M = M3.multiply(M, M3.translation([state.pivot.x, state.pivot.y]));
        M = M3.multiply(M, M3.rotation(state.face.rotation));
        M = M3.multiply(M, M3.translation([-state.pivot.x, -state.pivot.y]));

        // Trasladar y escalar la cara
        M = M3.multiply(M, M3.translation([state.face.translation.x, state.face.translation.y]));
        M = M3.multiply(M, M3.scale([state.face.scale.x, state.face.scale.y]));
    }

    // Dibujar el objeto
    gl.useProgram(prg);
    gl.uniformMatrix3fv(transformsLoc, false, M);
    gl.bindVertexArray(vaoObj.vao);
    gl.drawArrays(gl.TRIANGLES, 0, model.vertexCount);
    gl.bindVertexArray(null);
}

// Función de main para la ejecución de la escena (loop)
function main() {
    // Limpiar la pantalla antes de dibujar
    gl.clear(gl.COLOR_BUFFER_BIT);

    // Dibujar el pivote
    drawScene(gl, pivotVAO, {
        translation: [state.pivot.x, state.pivot.y],
        rotation: 0,
        scale: [state.pivot.scale.x, state.pivot.scale.y],
        vertexCount: pivotVAO.vertexCount
    });

    // Dibujar la cara
    drawScene(gl, faceVAO, {
        translation: [state.face.translation.x, state.face.translation.y],
        rotation: state.face.rotation,
        scale: [state.face.scale.x, state.face.scale.y],
        vertexCount: faceVAO.vertexCount
    });

    // Seguir el loop al siguiente frame
    requestAnimationFrame(main);
}
// Iniciar el loop
requestAnimationFrame(main);